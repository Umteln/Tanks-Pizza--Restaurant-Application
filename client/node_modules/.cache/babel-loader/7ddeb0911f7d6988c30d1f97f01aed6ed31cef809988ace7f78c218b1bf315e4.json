{"ast":null,"code":"import _regeneratorRuntime from\"/Users/amera-cs-intern/Desktop/pizza-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/amera-cs-intern/Desktop/pizza-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/amera-cs-intern/Desktop/pizza-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{CartContext}from'../utils/cartContext';import CartItem from'../components/CartItem';import{Link}from'react-router-dom';import'../styles/CartItem.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),firstLoad=_useState2[0],setFirstLoad=_useState2[1];var _useContext=useContext(CartContext),getTotalCost=_useContext.getTotalCost,setCartProducts=_useContext.setCartProducts,cartProducts=_useContext.cartProducts;var total=getTotalCost();useEffect(function(){if(firstLoad){var storedCart=localStorage.getItem('cart');var parsedStoredCart=JSON.parse(storedCart);setCartProducts(parsedStoredCart);setFirstLoad(false);}},[firstLoad,setCartProducts]);var checkout=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var items;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:items=cartProducts.filter(function(product){return product.quantity!==0;});_context.next=3;return fetch('https://tankspizza.onrender.com',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({items:items})}).then(function(response){return response.json();}).then(function(response){if(response.url){window.location.assign(response.url);// Forwarding user to Stripe\n}});case 3:case\"end\":return _context.stop();}},_callee);}));return function checkout(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"cartTitle\",children:\"Your Cart Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cartList\",children:cartProducts.map(function(product){return product.quantity!==0?/*#__PURE__*/_jsx(CartItem,{product:product},product.id):'';})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total: $\",total]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout\",children:[/*#__PURE__*/_jsx(Link,{to:\"/menu\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Add More\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:checkout,children:\"Checkout\"})]})]});};export default Cart;","map":{"version":3,"names":["React","useContext","useEffect","useState","CartContext","CartItem","Link","Cart","firstLoad","setFirstLoad","getTotalCost","setCartProducts","cartProducts","total","storedCart","localStorage","getItem","parsedStoredCart","JSON","parse","checkout","items","filter","product","quantity","fetch","method","headers","body","stringify","then","response","json","url","window","location","assign","map","id"],"sources":["/Users/amera-cs-intern/Desktop/pizza-app/client/src/pages/Cart.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { CartContext } from '../utils/cartContext';\nimport CartItem from '../components/CartItem';\nimport { Link } from 'react-router-dom';\nimport '../styles/CartItem.css';\n\nconst Cart = () => {\n\tconst [firstLoad, setFirstLoad] = useState(true);\n\tconst { getTotalCost, setCartProducts, cartProducts } =\n\t\tuseContext(CartContext);\n\tconst total = getTotalCost();\n\n\tuseEffect(() => {\n\t\tif (firstLoad) {\n\t\t\tconst storedCart = localStorage.getItem('cart');\n\t\t\tconst parsedStoredCart = JSON.parse(storedCart);\n\t\t\tsetCartProducts(parsedStoredCart);\n\t\t\tsetFirstLoad(false);\n\t\t}\n\t}, [firstLoad, setCartProducts]);\n\n\tconst checkout = async () => {\n\t\tlet items = cartProducts.filter((product) => product.quantity !== 0);\n\t\tawait fetch('https://tankspizza.onrender.com', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ items: items }),\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response.url) {\n\t\t\t\t\twindow.location.assign(response.url); // Forwarding user to Stripe\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className='cart'>\n\t\t\t<h1 className='cartTitle'>Your Cart Items</h1>\n\t\t\t<div className='cartList'>\n\t\t\t\t{cartProducts.map((product) =>\n\t\t\t\t\tproduct.quantity !== 0 ? (\n\t\t\t\t\t\t<CartItem\n\t\t\t\t\t\t\tkey={product.id}\n\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t''\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<h2>Total: ${total}</h2>\n\t\t\t<div className='checkout'>\n\t\t\t\t<Link to='/menu'>\n\t\t\t\t\t<button>Add More</button>\n\t\t\t\t</Link>\n\n\t\t\t\t<button onClick={checkout}>Checkout</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Cart;\n"],"mappings":"+ZAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,sBAAsB,CAClD,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,wBAAwB,CAAC,wFAEhC,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CAClB,cAAkCJ,QAAQ,CAAC,IAAI,CAAC,wCAAzCK,SAAS,eAAEC,YAAY,eAC9B,gBACCR,UAAU,CAACG,WAAW,CAAC,CADhBM,YAAY,aAAZA,YAAY,CAAEC,eAAe,aAAfA,eAAe,CAAEC,YAAY,aAAZA,YAAY,CAEnD,GAAMC,MAAK,CAAGH,YAAY,EAAE,CAE5BR,SAAS,CAAC,UAAM,CACf,GAAIM,SAAS,CAAE,CACd,GAAMM,WAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAMC,iBAAgB,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CAC/CH,eAAe,CAACM,gBAAgB,CAAC,CACjCR,YAAY,CAAC,KAAK,CAAC,CACpB,CACD,CAAC,CAAE,CAACD,SAAS,CAAEG,eAAe,CAAC,CAAC,CAEhC,GAAMS,SAAQ,4FAAG,8IACZC,KAAK,CAAGT,YAAY,CAACU,MAAM,CAAC,SAACC,OAAO,QAAKA,QAAO,CAACC,QAAQ,GAAK,CAAC,GAAC,uBAC9DC,MAAK,CAAC,iCAAiC,CAAE,CAC9CC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACR,cAAc,CAAE,kBACjB,CAAC,CACDC,IAAI,CAAEV,IAAI,CAACW,SAAS,CAAC,CAAER,KAAK,CAAEA,KAAM,CAAC,CACtC,CAAC,CAAC,CACAS,IAAI,CAAC,SAACC,QAAQ,CAAK,CACnB,MAAOA,SAAQ,CAACC,IAAI,EAAE,CACvB,CAAC,CAAC,CACDF,IAAI,CAAC,SAACC,QAAQ,CAAK,CACnB,GAAIA,QAAQ,CAACE,GAAG,CAAE,CACjBC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACL,QAAQ,CAACE,GAAG,CAAC,CAAE;AACvC,CACD,CAAC,CAAC,sDACH,kBAjBKb,SAAQ,0CAiBb,CAED,mBACC,aAAK,SAAS,CAAC,MAAM,wBACpB,WAAI,SAAS,CAAC,WAAW,UAAC,iBAAe,EAAK,cAC9C,YAAK,SAAS,CAAC,UAAU,UACvBR,YAAY,CAACyB,GAAG,CAAC,SAACd,OAAO,QACzBA,QAAO,CAACC,QAAQ,GAAK,CAAC,cACrB,KAAC,QAAQ,EAER,OAAO,CAAED,OAAQ,EADZA,OAAO,CAACe,EAAE,CAEd,CAEF,EACA,GACD,EACI,cACN,sBAAI,UAAQ,CAACzB,KAAK,GAAM,cACxB,aAAK,SAAS,CAAC,UAAU,wBACxB,KAAC,IAAI,EAAC,EAAE,CAAC,OAAO,uBACf,wBAAQ,UAAQ,EAAS,EACnB,cAEP,eAAQ,OAAO,CAAEO,QAAS,UAAC,UAAQ,EAAS,GACvC,GACD,CAER,CAAC,CAED,cAAeb,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}