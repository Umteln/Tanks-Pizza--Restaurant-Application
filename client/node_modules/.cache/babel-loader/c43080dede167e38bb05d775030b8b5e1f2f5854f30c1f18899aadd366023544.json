{"ast":null,"code":"var _jsxFileName = \"/Users/amera-cs-intern/Desktop/pizza-app/client/src/pages/Cart.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { CartContext } from '../utils/cartContext';\nimport CartItem from '../components/CartItem';\nimport { Link } from 'react-router-dom';\nimport '../styles/CartItem.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cart = () => {\n  _s();\n  const [firstLoad, setFirstLoad] = useState(true);\n  const {\n    getTotalCost,\n    setCartProducts,\n    cartProducts\n  } = useContext(CartContext);\n  const total = getTotalCost();\n  useEffect(() => {\n    if (firstLoad) {\n      const storedCart = localStorage.getItem('cart');\n      const parsedStoredCart = JSON.parse(storedCart);\n      setCartProducts(parsedStoredCart);\n      setFirstLoad(false);\n    }\n  }, [firstLoad, setCartProducts]);\n  const checkout = async () => {\n    let items = cartProducts.filter(product => product.quantity !== 0);\n    await fetch('https://tankspizza.onrender.com/chec', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        items: items\n      })\n    }).then(response => {\n      return response.json();\n    }).then(response => {\n      if (response.url) {\n        window.location.assign(response.url); // Forwarding user to Stripe\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"cartTitle\",\n      children: \"Your Cart Items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartList\",\n      children: cartProducts.map(product => product.quantity !== 0 ? /*#__PURE__*/_jsxDEV(CartItem, {\n        product: product\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }, this) : '')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Total: $\", total]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"checkout\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/menu\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Add More\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: checkout,\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 3\n  }, this);\n};\n_s(Cart, \"oaa+pX4oPN0hRTOyaCl8hI2mwE0=\");\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useContext","useEffect","useState","CartContext","CartItem","Link","Cart","firstLoad","setFirstLoad","getTotalCost","setCartProducts","cartProducts","total","storedCart","localStorage","getItem","parsedStoredCart","JSON","parse","checkout","items","filter","product","quantity","fetch","method","headers","body","stringify","then","response","json","url","window","location","assign","map","id"],"sources":["/Users/amera-cs-intern/Desktop/pizza-app/client/src/pages/Cart.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { CartContext } from '../utils/cartContext';\nimport CartItem from '../components/CartItem';\nimport { Link } from 'react-router-dom';\nimport '../styles/CartItem.css';\n\nconst Cart = () => {\n\tconst [firstLoad, setFirstLoad] = useState(true);\n\tconst { getTotalCost, setCartProducts, cartProducts } =\n\t\tuseContext(CartContext);\n\tconst total = getTotalCost();\n\n\tuseEffect(() => {\n\t\tif (firstLoad) {\n\t\t\tconst storedCart = localStorage.getItem('cart');\n\t\t\tconst parsedStoredCart = JSON.parse(storedCart);\n\t\t\tsetCartProducts(parsedStoredCart);\n\t\t\tsetFirstLoad(false);\n\t\t}\n\t}, [firstLoad, setCartProducts]);\n\n\tconst checkout = async () => {\n\t\tlet items = cartProducts.filter((product) => product.quantity !== 0);\n\t\tawait fetch('https://tankspizza.onrender.com/chec', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ items: items }),\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (response.url) {\n\t\t\t\t\twindow.location.assign(response.url); // Forwarding user to Stripe\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<div className='cart'>\n\t\t\t<h1 className='cartTitle'>Your Cart Items</h1>\n\t\t\t<div className='cartList'>\n\t\t\t\t{cartProducts.map((product) =>\n\t\t\t\t\tproduct.quantity !== 0 ? (\n\t\t\t\t\t\t<CartItem\n\t\t\t\t\t\t\tkey={product.id}\n\t\t\t\t\t\t\tproduct={product}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t''\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<h2>Total: ${total}</h2>\n\t\t\t<div className='checkout'>\n\t\t\t\t<Link to='/menu'>\n\t\t\t\t\t<button>Add More</button>\n\t\t\t\t</Link>\n\n\t\t\t\t<button onClick={checkout}>Checkout</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Cart;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,sBAAsB;AAClD,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAO,wBAAwB;AAAC;AAEhC,MAAMC,IAAI,GAAG,MAAM;EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM;IAAEO,YAAY;IAAEC,eAAe;IAAEC;EAAa,CAAC,GACpDX,UAAU,CAACG,WAAW,CAAC;EACxB,MAAMS,KAAK,GAAGH,YAAY,EAAE;EAE5BR,SAAS,CAAC,MAAM;IACf,IAAIM,SAAS,EAAE;MACd,MAAMM,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAC/C,MAAMC,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC;MAC/CH,eAAe,CAACM,gBAAgB,CAAC;MACjCR,YAAY,CAAC,KAAK,CAAC;IACpB;EACD,CAAC,EAAE,CAACD,SAAS,EAAEG,eAAe,CAAC,CAAC;EAEhC,MAAMS,QAAQ,GAAG,YAAY;IAC5B,IAAIC,KAAK,GAAGT,YAAY,CAACU,MAAM,CAAEC,OAAO,IAAKA,OAAO,CAACC,QAAQ,KAAK,CAAC,CAAC;IACpE,MAAMC,KAAK,CAAC,sCAAsC,EAAE;MACnDC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACR,cAAc,EAAE;MACjB,CAAC;MACDC,IAAI,EAAEV,IAAI,CAACW,SAAS,CAAC;QAAER,KAAK,EAAEA;MAAM,CAAC;IACtC,CAAC,CAAC,CACAS,IAAI,CAAEC,QAAQ,IAAK;MACnB,OAAOA,QAAQ,CAACC,IAAI,EAAE;IACvB,CAAC,CAAC,CACDF,IAAI,CAAEC,QAAQ,IAAK;MACnB,IAAIA,QAAQ,CAACE,GAAG,EAAE;QACjBC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACL,QAAQ,CAACE,GAAG,CAAC,CAAC,CAAC;MACvC;IACD,CAAC,CAAC;EACJ,CAAC;;EAED,oBACC;IAAK,SAAS,EAAC,MAAM;IAAA,wBACpB;MAAI,SAAS,EAAC,WAAW;MAAA,UAAC;IAAe;MAAA;MAAA;MAAA;IAAA,QAAK,eAC9C;MAAK,SAAS,EAAC,UAAU;MAAA,UACvBrB,YAAY,CAACyB,GAAG,CAAEd,OAAO,IACzBA,OAAO,CAACC,QAAQ,KAAK,CAAC,gBACrB,QAAC,QAAQ;QAER,OAAO,EAAED;MAAQ,GADZA,OAAO,CAACe,EAAE;QAAA;QAAA;QAAA;MAAA,QAEd,GAEF,EACA;IACD;MAAA;MAAA;MAAA;IAAA,QACI,eACN;MAAA,WAAI,UAAQ,EAACzB,KAAK;IAAA;MAAA;MAAA;MAAA;IAAA,QAAM,eACxB;MAAK,SAAS,EAAC,UAAU;MAAA,wBACxB,QAAC,IAAI;QAAC,EAAE,EAAC,OAAO;QAAA,uBACf;UAAA,UAAQ;QAAQ;UAAA;UAAA;UAAA;QAAA;MAAS;QAAA;QAAA;QAAA;MAAA,QACnB,eAEP;QAAQ,OAAO,EAAEO,QAAS;QAAA,UAAC;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACvC;EAAA;IAAA;IAAA;IAAA;EAAA,QACD;AAER,CAAC;AAAC,GA3DIb,IAAI;AAAA,KAAJA,IAAI;AA6DV,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}